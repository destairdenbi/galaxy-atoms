id: bs_tour_5a
name: 'BS-Seq analysis'
description: 'Quantification of methylated reads within a CpG context using Samtools, MethylDackel, and Bedtools'
title_default: 'BS-Seq analysis'
steps:
  - title: '<b>Outline</b>'
    element: '#masthead:visible'
    content: 'In this tour we will infer genome-wide methylation rates in a CpG context.<br>
Here, we will leverage on two tools:<br>
- <b>Samtools</b>, to extract uniquely mapped and properly paired sequences from aligned input data and mark duplicons<br>
- <b>MethylDackel</b> to quantify the methylated reads of the provided CpG context file.'
    placement: bottom



# filter alignment



  - title: '<b>Extract properly paired sequences</b>'
    element: '#tool-search-query:visible'
    content: 'Look for <b>Filter SAM or BAM by Samtools</b>.'
    placement: right
    textinsert: filter sam or bam
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtool_filter2%2Fsamtool_filter2%2F1.8%2Bgalaxy1"]

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="input1"]:visible'
    placement: bottom
    content: '<h4>Select: <b>mapped.ctr</b></h4>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="mapq"]:visible'
    placement: top
    content: 'To mask uniquely mapped reads, mapping tools usually assign mapping qualities greater 0 except e.g. STAR (255).<br>
<h4>Enter: <b>1</b></h4>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="flag|filter"]:visible'
    placement: top
    content: '<h4>Select: <b>yes</b></h4>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="flag|reqBits"]:visible'
    content: 'Since input data is paired-end, select read mapped in a proper pair.'
    placement: top
    select:
      - '[tour_id="flag|reqBits"] .ui-form-field .ui-options .ui-options-list > :nth-child(2) input'

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="flag|skipBits"]:visible'
    content: 'Optionally skip reads which were not aligned or flagged as secondary, supplementary respectively.'
    placement: top
    select:
      - '[tour_id="flag|skipBits"] .ui-form-field .ui-options .ui-options-list > :nth-child(3) input'
      - '[tour_id="flag|skipBits"] .ui-form-field .ui-options .ui-options-list > :nth-child(9) input'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrization options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#right:visible'
    content: 'Samtools filter processing has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Filter SAM or BAM")'



# redo for treat


  - title: '<b>Extract properly paired sequences</b>'
    element: '#tool-search-query:visible'
    content: 'Meanwhile apply read filter steps for treatment samples, too.'
    placement: right
    textinsert: filter sam or bam
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtool_filter2%2Fsamtool_filter2%2F1.8%2Bgalaxy1"]

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="input1"]:visible'
    placement: bottom
    content: '<h4>Select: <b>mapped.treat</b></h4>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="mapq"]:visible'
    placement: top
    content: 'To mask uniquely mapped reads, mapping tools usually assign mapping qualities greater 0 except e.g. STAR (255).<br>
<h4>Enter: <b>1</b></h4>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="flag|filter"]:visible'
    placement: top
    content: '<h4>Select: <b>yes</b></h4>'
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="flag|reqBits"]:visible'
    content: 'Since input data is paired-end, select read mapped in a proper pair.'
    placement: top
    select:
      - '[tour_id="flag|reqBits"] .ui-form-field .ui-options .ui-options-list > :nth-child(2) input'

  - title: '<b>Extract properly paired sequences</b>'
    element: '[tour_id="flag|skipBits"]:visible'
    content: 'Optionally skip reads which were not aligned or flagged as secondary, supplementary respectively.'
    placement: top
    select:
      - '[tour_id="flag|skipBits"] .ui-form-field .ui-options .ui-options-list > :nth-child(3) input'
      - '[tour_id="flag|skipBits"] .ui-form-field .ui-options .ui-options-list > :nth-child(9) input'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrization options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#right:visible'
    content: 'Samtools filter processing has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Filter SAM or BAM")'



# wait and tag



  - title: '<b>Extract properly paired sequences</b>'
    element: '#masthead:visible'
    content: 'The read filter tasks have been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-queued:visible'
        count: 0

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (1/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>filtered.treat</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (2/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>filtered.ctr</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Extract properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'



# name sort alignment



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query:visible'
    content: 'Look for <b>Samtools sort</b>.'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"]:visible'
    placement: bottom
    content: '<h4>Select: <b>filtered.ctr</b></h4>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="prim_key_cond|prim_key_select"]:visible'
    placement: bottom
    content: '<h4>Select: <b>name (-n)</b></h4>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings. However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right:visible'
    content: 'Samtools sort processing has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools sort")'



# redo for treat



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query:visible'
    content: 'Meanwhile apply Samtools sort on treatment samples.'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"]:visible'
    placement: bottom
    content: '<h4>Select: <b>filtered.treat</b></h4>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="prim_key_cond|prim_key_select"]:visible'
    placement: bottom
    content: '<h4>Select: <b>name (-n)</b></h4>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right:visible'
    content: 'Samtools sort processing has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools sort")'



# wait and tag



  - title: '<b>Sort properly paired sequences</b>'
    element: '#masthead:visible'
    content: 'Sorting the filtered alignments has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-queued:visible'
        count: 0

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (1/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>namesorted.treat</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (2/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>namesorted.ctr</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'



# fixmate alignment


  - title: '<b>Add tags</b>'
    element: '#tool-search-query:visible'
    content: 'Look for <b>Samtools fixmate</b>.'
    placement: right
    textinsert: samtools fixmate
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_fixmate%2Fsamtools_fixmate%2F1.9"]

  - title: '<b>Add tags</b>'
    element: '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Add tags</b>'
    element: '[tour_id="bamfile"]:visible'
    placement: bottom
    content: '<h4>Select: <b>namesorted.ctr</b></h4>'
    pointer: true

  - title: '<b>Add tags</b>'
    element: '[tour_id="addms"] .btn-group.ui-radiobutton:visible'
    content: 'Add scores to mate pairs according to their CIGAR strings.'
    placement: bottom
    onnextclick:
      - '[tour_id="addms"] .btn-group.ui-radiobutton > :nth-child(1):visible'

  - title: '<b>Add tags</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Add tags</b>'
    element: '#right:visible'
    content: 'Adding tags by Samtools fixmate has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools fixmate")'



# redo for treat



  - title: '<b>Add tags</b>'
    element: '#tool-search-query:visible'
    content: 'Meanwhile apply Samtools fixmate on alignments of treatment samples.'
    placement: right
    textinsert: samtools fixmate
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_fixmate%2Fsamtools_fixmate%2F1.9"]

  - title: '<b>Add tags</b>'
    element: '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Add tags</b>'
    element: '[tour_id="bamfile"]:visible'
    placement: bottom
    content: '<h4>Select: <b>namesorted.treat</b></h4>'
    pointer: true

  - title: '<b>Add tags</b>'
    element: '[tour_id="addms"] .btn-group.ui-radiobutton:visible'
    content: 'Add scores to mate pairs according to their CIGAR strings.'
    placement: bottom
    onnextclick:
      - '[tour_id="addms"] .btn-group.ui-radiobutton > :nth-child(1):visible'

  - title: '<b>Add tags</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Add tags</b>'
    element: '#right:visible'
    content: 'Adding tags by Samtools fixmate has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools fixmate")'



# wait and tag



  - title: '<b>Add tags</b>'
    element: '#masthead:visible'
    content: 'Adding tags has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-queued:visible'
        count: 0

  - title: '<b>Add tags</b>'
    element: '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (1/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'

  - title: '<b>Add tags</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>tagged.treat</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Add tags</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'

  - title: '<b>Add tags</b>'
    element: '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (2/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'

  - title: '<b>Add tags</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>tagged.ctr</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Add tags</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'




# markdups


  - title: '<b>Mark duplicates</b>'
    element: '#tool-search-query:visible'
    content: 'To finally, mark PCR or optical duplicates, look for <b>Samtools markdup</b>.'
    placement: right
    textinsert: samtools markdup
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_markdup%2Fsamtools_markdup%2F1.9%2Bgalaxy2"]

  - title: '<b>Mark duplicates</b>'
    element: '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Mark duplicates</b>'
    element: '[tour_id="bamfile"]:visible'
    placement: bottom
    content: '<h4>Select: <b>tagged.ctr</b></h4>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '[tour_id="maxlen"]:visible'
    placement: top
    content: 'According to common input dataset<br>
<h4>Enter: <b>100</b></h4>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Mark duplicates</b>'
    element: '#right:visible'
    content: 'Mark duplicates by Samtools has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools markdup")'



# redo for treat



  - title: '<b>Mark duplicates</b>'
    element: '#tool-search-query:visible'
    content: 'To finally, mark PCR or optical duplicates, look for <b>Samtools markdup</b>.'
    placement: right
    textinsert: samtools markdup
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fsamtools_markdup%2Fsamtools_markdup%2F1.9%2Bgalaxy2"]

  - title: '<b>Mark duplicates</b>'
    element: '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="bamfile"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Mark duplicates</b>'
    element: '[tour_id="bamfile"]:visible'
    placement: bottom
    content: '<h4>Select: <b>tagged.treat</b></h4>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '[tour_id="maxlen"]:visible'
    placement: top
    content: 'According to common input dataset<br>
<h4>Enter: <b>100</b></h4>'
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Mark duplicates</b>'
    element: '#right:visible'
    content: 'Mark duplicates by Samtools has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools markdup")'



# wait and tag



  - title: '<b>Mark duplicates</b>'
    element: '#masthead:visible'
    content: 'Masking optical duplicates has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-queued:visible'
        count: 0

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (1/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>dupmarked.treat</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (2/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>dupmarked.ctr</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Mark duplicates</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'




# coordinate sort alignment



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query:visible'
    content: 'Again, look for <b>Samtools sort</b> to sort alignments by coordinate.'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"]:visible'
    placement: bottom
    content: '<h4>Select: <b>dupmarked.ctr</b></h4>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right:visible'
    content: 'Samtools sort processing has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools sort")'



# redo for treat



  - title: '<b>Sort properly paired sequences</b>'
    element: '#tool-search-query:visible'
    content: 'Meanwhile apply Samtools sort by coordinate on treatment samples.'
    placement: right
    textinsert: samtools sort
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fdevteam%2Fsamtools_sort%2Fsamtools_sort%2F2.0.3"]

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input1"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '[tour_id="input1"]:visible'
    placement: bottom
    content: '<h4>Select: <b>dupmarked.treat</b></h4>'
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'


  - title: '<b>Sort properly paired sequences</b>'
    element: '#right:visible'
    content: 'Samtools sort processing has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Samtools sort")'



# wait and tag



  - title: '<b>Sort properly paired sequences</b>'
    element: '#masthead:visible'
    content: 'Sorting the masked alignments has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-queued:visible'
        count: 0

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (1/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>coordsorted.treat</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (2/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>coordsorted.ctr</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Sort properly paired sequences</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'




# methyldackel



  - title: '<b>Infer methylation of CpGs</b>'
    element: '#tool-search-query:visible'
    content: 'Search for <b>MethylDackel</b> to call the methylation levels at each reference CpG, GHH or CHG site.'
    placement: right
    textinsert: methyldackel
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Fpileometh%2Fpileometh%2F0.3.0.1"]

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="reference_source|reference_source_selector"]:visible'
    content: '<h4>Select: <b>History</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="input_sortedAlignBAM"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input_sortedAlignBAM"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="input_sortedAlignBAM"]:visible'
    placement: top
    content: '<h4>Select: <b>coordsorted.ctr</b></h4>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="main_task|mergeContext"] .btn-group.ui-radiobutton:visible'
    content: 'Report a single methylation rate per CpG inferred from both strands instead of two.'
    placement: bottom
    onnextclick:
      - '[tour_id="main_task|mergeContext"] .btn-group.ui-radiobutton > :nth-child(1):visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|options"]:visible'
    placement: top
    content: 'In case of RRBS data and because of already properly postprocessed input alignments, some additional options need to be adapted.<br>
<h4>Select: <b>Display advanced options</b></h4>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|keepDupes"] .btn-group.ui-radiobutton:visible'
    content: '<b>Only in case of RRBS data sets</b>, ignore duplicons. Similar to RNA-Seq, fragment enrichment methods lead to true optical duplicons. Thus removal may cause up to 50% data loss.'
    placement: bottom
    onnextclick:
      - '[tour_id="advanced_options|keepDupes"] .btn-group.ui-radiobutton > :nth-child(1):visible'


  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|min_mapq"]:visible'
    placement: top
    content: 'Due to properly postprocessed alignments and in favor of true alignments with mapping quality below 10<br>
<h4>Enter: <b>0</b></h4>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|CHG"]:visible'
    placement: top
    content: '<h4>Switch to Yes in case of extended context methylation inference.</h4><br>
Default: No'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|ignoreFlags"]:visible'
    placement: top
    content: 'Due to properly postprocessed alignments and to not override previously altered duplicon settings<br>
<h4>Enter: <b>0</b></h4>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrization options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#right:visible'
    content: 'Methylation rate inference has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("MethylDackel")'



# redo for treat



  - title: '<b>Infer methylation of CpGs</b>'
    element: '#tool-search-query:visible'
    content: 'Meanwhile predict methylation rates for treatment samples, thus start <b>MethylDackel</b> again.'
    placement: right
    textinsert: methyldackel
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Fpileometh%2Fpileometh%2F0.3.0.1"]

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="reference_source|reference_source_selector"]:visible'
    content: '<h4>Select: <b>History</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="input_sortedAlignBAM"] .btn-group.ui-radiobutton > :nth-child(3):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="input_sortedAlignBAM"] .btn-group.ui-radiobutton > :nth-child(3):visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="input_sortedAlignBAM"]:visible'
    placement: top
    content: '<h4>Select: <b>coordsorted.treat</b></h4>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="main_task|mergeContext"] .btn-group.ui-radiobutton:visible'
    content: 'Report a single methylation rate per CpG inferred from both strands instead of two.'
    placement: bottom
    onnextclick:
      - '[tour_id="main_task|mergeContext"] .btn-group.ui-radiobutton > :nth-child(1):visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|options"]:visible'
    placement: top
    content: 'In case of RRBS data and because of already properly postprocessed input alignments, some additional options need to be adapted.<br>
<h4>Select: <b>Display advanced options</b></h4>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|keepDupes"] .btn-group.ui-radiobutton:visible'
    content: '<b>Only in case of RRBS data sets</b>, ignore duplicons. Similar to RNA-Seq, fragment enrichment methods lead to true optical duplicons. Thus removal may cause up to 50% data loss.'
    placement: bottom
    onnextclick:
      - '[tour_id="advanced_options|keepDupes"] .btn-group.ui-radiobutton > :nth-child(1):visible'


  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|min_mapq"]:visible'
    placement: top
    content: 'Due to properly postprocessed alignments and in favor of true alignments with mapping quality below 10<br>
<h4>Enter: <b>0</b></h4>'
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|CHG"]:visible'
    placement: top
    content: '<h4>Switch to Yes in case of extended context methylation inference.</h4><br>
Default: No'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '[tour_id="advanced_options|ignoreFlags"]:visible'
    placement: top
    content: 'Due to properly postprocessed alignments and to not override previously altered duplicon settings<br>
<h4>Enter: <b>0</b></h4>'
    pointer: true


  - title: '<b>Infer methylation of CpGs</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrization options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#right:visible'
    content: 'Methylation rate inference has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("MethylDackel")'



# wait and tag



  - title: '<b>Infer methylation of CpGs</b>'
    element: '#masthead:visible'
    content: 'Methylation rate inference has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset-collection.history-content.state-queued:visible'
        count: 0

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (1/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(1) .title-bar .title:visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>methrates.treat</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'
    content: 'To keep track of the data being processed, we will use tags (2/2).'
    placement: top
    onnextclick:
      - '#current-history-panel .list-items > :nth-child(2) .title-bar .title:visible'

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel .list-panel .controls .tags-display:visible'
    content: '<h4>Click and enter: <b>methrates.ctr</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Infer methylation of CpGs</b>'
    element: '#current-history-panel .list-panel .controls .navigation .back:visible'
    content: 'Return to history main view'
    placement: bottom
    onnextclick:
      - '#current-history-panel .list-panel .controls .navigation .back:visible'



# bedtools intersect



  - title: '<b>Infer promoter methylation level</b>'
    element: '#tool-search-query:visible'
    content: 'To extract CpG methylation of provided gene upstream regions (potential promoter), look for <b>bedtools intersect</b>.'
    placement: right
    textinsert: bedtools intersect
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fbedtools%2Fbedtools_intersectbed%2F2.27.1%2Bgalaxy1"]

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="inputA"] .btn-group.ui-radiobutton > :nth-child(2):visible'
    content: 'Switch to multiple dataset view.'
    placement: bottom
    onnextclick:
      - '[tour_id="inputA"] .btn-group.ui-radiobutton > :nth-child(2):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="inputA"] .ui-select-multiple.ui-select:visible'
    content: 'Select the promoter aka upstream regions file.'
    placement: bottom
    select:
      - '[tour_id="inputA"] .ui-select-multiple.ui-select .select option:contains("promoter.bed")'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="reduce_or_iterate|reduce_or_iterate_selector"]:visible'
    content: '<h4>Select: <b>Single output containing intersections of an input B</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="reduce_or_iterate|inputB"] .btn-group.ui-radiobutton > :nth-child(2):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="reduce_or_iterate|inputB"] .btn-group.ui-radiobutton > :nth-child(2):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="reduce_or_iterate|inputB"] .ui-select-multiple.ui-select:visible'
    content: 'Backtrack and select control dataset collection.'
    placement: top
    select:
      - '[tour_id="reduce_or_iterate|inputB"] .ui-select-multiple.ui-select .select > :nth-child(2):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="overlap_mode"] .ui-form-field:visible'
    content: '<h4>Click into field and select last entry: <b>Perform a left outer join</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="sorted"] .btn-group.ui-radiobutton:visible'
    content: 'Assume sorted input to speedup intersection.'
    placement: top
    onnextclick:
      - '[tour_id="sorted"] .btn-group.ui-radiobutton > :nth-child(1):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#right:visible'
    content: 'Intersection has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("bedtools Intersect")'



# redo for treat



  - title: '<b>Infer promoter methylation level</b>'
    element: '#tool-search-query:visible'
    content: 'Meanwhile extract CpG methylation of gene upstream regions for treatment samples, thus look again for <b>bedtools intersect</b>.'
    placement: right
    textinsert: bedtools intersect
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fbedtools%2Fbedtools_intersectbed%2F2.27.1%2Bgalaxy1"]

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="inputA"] .btn-group.ui-radiobutton > :nth-child(2):visible'
    content: 'Switch to multiple dataset view.'
    placement: bottom
    onnextclick:
      - '[tour_id="inputA"] .btn-group.ui-radiobutton > :nth-child(2):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="inputA"] .ui-select-multiple.ui-select:visible'
    content: 'Select the promoter aka upstream regions file.'
    placement: bottom
    select:
      - '[tour_id="inputA"] .ui-select-multiple.ui-select .select option:contains("promoter.bed")'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="reduce_or_iterate|reduce_or_iterate_selector"]:visible'
    content: '<h4>Select: <b>Single output containing intersections of an input B</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="reduce_or_iterate|inputB"] .btn-group.ui-radiobutton > :nth-child(2):visible'
    content: 'Select dataset collection.'
    placement: bottom
    onnextclick:
      - '[tour_id="reduce_or_iterate|inputB"] .btn-group.ui-radiobutton > :nth-child(2):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="reduce_or_iterate|inputB"] .ui-select-multiple.ui-select:visible'
    content: 'Backtrack and select treatment dataset collection.'
    placement: top
    select:
      - '[tour_id="reduce_or_iterate|inputB"] .ui-select-multiple.ui-select .select > :nth-child(1):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="overlap_mode"] .ui-form-field:visible'
    content: '<h4>Click into field and select last entry: <b>Perform a left outer join</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="sorted"] .btn-group.ui-radiobutton:visible'
    content: 'Assume sorted input to speedup intersection.'
    placement: top
    onnextclick:
      - '[tour_id="sorted"] .btn-group.ui-radiobutton > :nth-child(1):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#right:visible'
    content: 'Intersection has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("bedtools Intersect")'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#masthead:visible'
    content: 'Intersection with upstream regions has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-queued:visible'
        count: 0


# bedtools merge



  - title: '<b>Infer promoter methylation level</b>'
    element: '#tool-search-query:visible'
    content: 'Look for <b>bedtools merge</b> to calculate mean methylation levels.'
    placement: right
    textinsert: bedtools mergebed
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fiuc%2Fbedtools%2Fbedtools_mergebed%2F2.27.1"]

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="input"] .btn-group.ui-radiobutton > :nth-child(2):visible'
    content: 'Select multiple datasets.'
    placement: bottom
    onnextclick:
      - '[tour_id="input"] .btn-group.ui-radiobutton > :nth-child(2):visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="input"] .ui-select-multiple.ui-select:visible'
    content: 'Select both, control and treated intersection datasets.'
    placement: bottom
    select:
      - '[tour_id="input"] .ui-select-multiple.ui-select .select > :nth-child(-n+2):visible'



  - title: '<b>Infer promoter methylation level</b>'
    element: '.float-none:visible'
    content: 'Add a rule which keeps the gene ID information.'
    placement: top
    onnextclick:
      - '.float-none:visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="c_and_o_argument_repeat_0|col"]:visible'
    content: '<h4>To keep the gene ID select: <b>Column 4</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="c_and_o_argument_repeat_0|operation"]:visible'
    content: '<h4>Scroll down and select: <b>distinct</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '.float-none:visible'
    content: 'Add a rule which keeps the gene ID information.'
    placement: top
    onnextclick:
      - '.float-none:visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="c_and_o_argument_repeat_1|col"]:visible'
    content: '<h4>To keep and mean the methylation rates, scroll down and <br>
select: <b>Column 9</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer promoter methylation level</b>'
    element: '[tour_id="c_and_o_argument_repeat_1|operation"]:visible'
    content: '<h4>Select: <b>Mean</b></h4>'
    placement: top
    pointer: true


  - title: '<b>Infer promoter methylation level</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#right:visible'
    content: 'Merging data tables and mean methylation calculation has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Merged")'

  - title: '<b>Infer promoter methylation level</b>'
    element: '#masthead:visible'
    content: 'Mean methylation calculation has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-queued:visible'
        count: 0

  - title: '<b>Infer log2 fold-change</b>'
    element: '#tool-search-query:visible'
    content: 'Look for <b>Join two files</b>.'
    placement: right
    textinsert: join two files
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Ftext_processing%2Ftp_easyjoin_tool%2F1.1.1"]

  - title: '<b>Infer log2 fold-change</b>'
    element: '[tour_id="infile1"]:visible'
    content: '<h4>Backtrack and select <b>the second merged dataset</b> i.e. the control data</h4>'
    placement: bottom
    pointer: true

  - title: '<b>Infer log2 fold-change</b>'
    element: '[tour_id="column1"]:visible'
    content: '<h4>Select the unique start position: <b>Column 2</b></h4>'
    placement: bottom
    pointer: true

  - title: '<b>Infer log2 fold-change</b>'
    element: '[tour_id="column2"]:visible'
    content: '<h4>Select the unique start position: <b>Column 2</b></h4>'
    placement: bottom
    pointer: true


  - title: '<b>Infer log2 fold-change</b>'
    element: '#execute:visible'
    content: 'For all remaining parametrisation options, we will use the provided default settings.<br>
However, for further information, please refer to the manual provided below the tool box.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer log2 fold-change</b>'
    element: '#right:visible'
    content: 'Joining tables has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Join")'

  - title: '<b>Infer log2 fold-change</b>'
    element: '#masthead:visible'
    content: 'Joining has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-queued:visible'
        count: 0




# awk log2fc



  - title: '<b>Infer log2 fold-change</b>'
    element: '#tool-search-query:visible'
    content: 'Look for <b>Text reformatting with awk</b>.'
    placement: right
    textinsert: text reformatting
    postclick:
      - >-
        a[href$="/tool_runner?tool_id=toolshed.g2.bx.psu.edu%2Frepos%2Fbgruening%2Ftext_processing%2Ftp_awk_tool%2F1.1.1"]

  - title: '<b>Infer log2 fold-change</b>'
    element: '[tour_id="code"]:visible'
    content: '<h4>Enter:<br><b>BEGIN{print "gene_id\tctr_methrate\ttreat_methrate\tlog2fc"}{print $4"\t"$5"\t"$9"\t"($5 < $9 ? (log($9+1)-log($5+1))/log(2) : -(log($5+1)-log($9+1))/log(2))}</b></h4>'
    placement: top
    pointer: true

  - title: '<b>Infer log2 fold-change</b>'
    element: '#execute:visible'
    content: 'Extract methylation columns and calculate log2 fold-change.'
    placement: top
    postclick:
      - '#execute:visible'

  - title: '<b>Infer log2 fold-change</b>'
    element: '#right:visible'
    content: 'Log2 fold-change calculation has begun, and the results are loading in your history.'
    placement: left
    onloadwait:
      - element: '#current-history-panel .list-items > :nth-child(1) .name:contains("Text reformatting")'


  - title: '<b>Infer log2 fold-change</b>'
    element: '#masthead:visible'
    content: 'Log2 fold-change calculation has been completed.'
    placement: bottom
    onloadwait:
      - element: '#current-history-panel .list-item.dataset.history-content.state-loading:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-new:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-running:visible'
        count: 0
      - element: '#current-history-panel .list-item.dataset.history-content.state-queued:visible'
        count: 0

  - title: '<b>Infer log2 fold-change</b>'
    element: '#masthead:visible'
    content: 'You successfully completed this Galaxy atom.'
    placement: bottom
